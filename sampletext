print("\n📡 Fetching option chain snapshot...")
print(f"API URL: {url}")
print(f"HTTP Status: {response.status_code}")

try:
    data = response.json()
    print(f"✅ Parsed response. Result count: {len(data.get('results', []))}")
    if len(data.get("results", [])) == 0:
        print("⚠️ No results returned. Raw response:")
        print(response.text)
except Exception as e:
    print("❌ JSON parse error:", e)
    print("Raw response:", response.text)
    return pd.DataFrame()