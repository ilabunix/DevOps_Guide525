signals = []

for option in results:
    try:
        details = option["details"]
        day = option["day"]
        greeks = option.get("greeks", {})
        oi = option["open_interest"]
        volume = day.get("volume", 0)
        price = day.get("close", 0)
        delta = greeks.get("delta", None)
        opt_type = details["option_type"]

        # TEMP relaxed filters to force output
        if opt_type == "call" and volume > 0 and price > 0:
            signals.append({
                "ticker": details["underlying_asset"]["ticker"],
                "strike": details["strike_price"],
                "expiry": details["expiration_date"],
                "entry": price,
                "volume": volume,
                "oi": oi,
                "delta": round(delta, 2) if delta else None,
                "iv_rank": 21,
                "flow_score": 70,
                "type": "intraday",
                "vwap_breakout": True
            })
    except Exception as e:
        continue